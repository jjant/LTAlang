{"version":3,"sources":["../../src/utils/json.js"],"names":["mergeAdacentJSONTextNodes","node","Array","isArray","arr","length","concatString","i","child","push","key","value"],"mappings":";;;;;;;;QAcgBA,yB,GAAAA,yB;;;AADhB;AAbA;;;;;;;;;AAcO,SAASA,yBAAT,CAAmCC,IAAnC,EAA+C;AACpD;AACA,MAAIC,MAAMC,OAAN,CAAcF,IAAd,CAAJ,EAAyB;AACvB;AACA,QAAIG,MAAM,EAAV;AACA,QAAIC,SAASJ,KAAKI,MAAlB;AACA,QAAIC,eAAe,IAAnB;AACA,QAAIC,IAAI,CAAC,CAAT;AACA,WAAOA,MAAMF,MAAb,EAAqB;AACnB,UAAIG,QAAQP,KAAKM,CAAL,CAAZ;AACA,UAAI,OAAOC,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,QAAlD,EAA4D;AAC1D,YAAIF,iBAAiB,IAArB,EAA2B;AACzBA,0BAAgBE,KAAhB;AACD,SAFD,MAEO;AACLF,yBAAeE,KAAf;AACD;AACF,OAND,MAMO,IAAI,QAAOA,KAAP,yCAAOA,KAAP,OAAiB,QAAjB,IAA6BA,UAAU,IAA3C,EAAiD;AACtD,YAAIF,iBAAiB,IAArB,EAA2B;AACzBF,cAAIK,IAAJ,CAASH,YAAT;AACAA,yBAAe,IAAf;AACD;AACDF,YAAIK,IAAJ,CAAST,0BAA0BQ,KAA1B,CAAT;AACD;AACF;AACD,QAAIF,iBAAiB,IAArB,EAA2B;AACzBF,UAAIK,IAAJ,CAASH,YAAT;AACD;AACD,WAAOF,GAAP;AACD,GA1BD,MA0BO;AACL,SAAK,IAAIM,IAAT,IAAgBT,IAAhB,EAAsB;AACpB,UAAIU,QAAQV,KAAKS,IAAL,CAAZ;AACA,UAAI,QAAOC,KAAP,yCAAOA,KAAP,OAAiB,QAAjB,IAA6BA,UAAU,IAA3C,EAAiD;AAC/CV,aAAKS,IAAL,IAAYV,0BAA4BW,KAA5B,CAAZ;AACD;AACF;AACF;AACD,SAAOV,IAAP;AACD","file":"json.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\ntype JSONValue = Array<JSONValue> | string | number | JSON;\ntype JSON = { [key: string]: JSONValue };\n\n// this will mutate the original JSON object\nexport function mergeAdacentJSONTextNodes(node: JSON) {\n  // we merge adjacent text nodes\n  if (Array.isArray(node)) {\n    // we create a new array rather than mutating the original\n    let arr = [];\n    let length = node.length;\n    let concatString = null;\n    let i = -1;\n    while (i++ < length) {\n      let child = node[i];\n      if (typeof child === \"string\" || typeof child === \"number\") {\n        if (concatString !== null) {\n          concatString += child;\n        } else {\n          concatString = child;\n        }\n      } else if (typeof child === \"object\" && child !== null) {\n        if (concatString !== null) {\n          arr.push(concatString);\n          concatString = null;\n        }\n        arr.push(mergeAdacentJSONTextNodes(child));\n      }\n    }\n    if (concatString !== null) {\n      arr.push(concatString);\n    }\n    return arr;\n  } else {\n    for (let key in node) {\n      let value = node[key];\n      if (typeof value === \"object\" && value !== null) {\n        node[key] = mergeAdacentJSONTextNodes(((value: any): JSON));\n      }\n    }\n  }\n  return node;\n}\n"]}