{"version":3,"sources":["../../src/methods/create.js"],"names":["StringCreate","CreateHTML","MakeArgGetter","MakeArgSetter","CreateStringIterator","ArraySpeciesCreate","CreateIterResultObject","CreateArrayIterator","ArrayCreate","CreateArrayFromList","CreateUnmappedArgumentsObject","CreateMappedArgumentsObject","CreateDataProperty","CreateMethodProperty","CreateDataPropertyOrThrow","ObjectCreate","OrdinaryCreateFromConstructor","CreateListFromArrayLike","CreateDynamicFunction","realm","value","prototype","S","$StringData","$Prototype","setExtensible","length","DefinePropertyOrThrow","writable","enumerable","configurable","string","tag","attribute","str","p1","V","escapedV","replace","p2","p3","p4","name","env","undefined","GetBindingValue","context","SetMutableBinding","iterator","intrinsics","StringIteratorPrototype","$IteratedString","$StringIteratorNextIndex","originalArray","Object","is","C","isArray","thisRealm","realmC","Array","mightBeObject","mightNotBeObject","throwIfNotConcrete","SymbolSpecies","createErrorThrowCompletion","TypeError","throwIfNotConcreteObject","done","obj","ObjectPrototype","array","kind","ArrayIteratorPrototype","$IteratedObject","$ArrayIteratorNextIndex","$ArrayIterationKind","proto","Math","pow","RangeError","ArrayPrototype","A","OrdinaryDefineOwnProperty","elems","elem","arr","n","status","argumentsList","len","$ParameterMap","index","val","SymbolIterator","ArrayProto_values","get","ThrowTypeError","set","func","formals","param","type","map","parameterNames","push","numberOfParameters","mappedNames","indexOf","g","p","$DefineOwnProperty","O","P","newDesc","success","internalSlotsList","assign","constructor","intrinsicDefaultProto","elementTypes","list","indexName","next","newTarget","args","fallbackProto","argCount","bodyText","emptyString","firstArg","k","nextArg","nextArgString","ast","e","SyntaxError","program","body","functionDeclaration","params","strict","containsYield","node","F","FunctionAllocate","realmF","$Realm","scope","$GlobalEnv","FunctionInitialize","GeneratorPrototype","originalConstructor","SetFunctionName"],"mappings":"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","file":"create.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport type { Realm } from \"../realm.js\";\nimport type { EnvironmentRecord } from \"../environment.js\";\nimport type { PropertyKeyValue, IterationKind } from \"../types.js\";\nimport {\n  AbstractObjectValue,\n  NativeFunctionValue,\n  NullValue,\n  BooleanValue,\n  ArrayValue,\n  ObjectValue,\n  Value,\n  StringValue,\n  NumberValue,\n  FunctionValue,\n  UndefinedValue,\n  StringExotic,\n  ArgumentsExotic,\n} from \"../values/index.js\";\nimport { GetPrototypeFromConstructor } from \"./get.js\";\nimport { IsConstructor, IsPropertyKey, IsArray } from \"./is.js\";\nimport { Type, SameValue, RequireObjectCoercible } from \"./abstract.js\";\nimport { ToStringPartial, ToLength } from \"./to.js\";\nimport { Get, GetFunctionRealm } from \"./get.js\";\nimport { Construct, MakeConstructor } from \"./construct.js\";\nimport { Functions, Properties } from \"../singletons.js\";\nimport IsStrict from \"../utils/strict.js\";\nimport invariant from \"../invariant.js\";\nimport parse from \"../utils/parse.js\";\nimport traverseFast from \"../utils/traverse-fast.js\";\nimport type { BabelNodeIdentifier, BabelNodeLVal, BabelNodeFunctionDeclaration } from \"babel-types\";\n\n// ECMA262 9.4.3.3\nexport function StringCreate(realm: Realm, value: StringValue, prototype: ObjectValue): ObjectValue {\n  // 1. Assert: Type(value) is String.\n  invariant(value instanceof StringValue, \"expected string value\");\n\n  // 2. Let S be a newly created String exotic object.\n  let S = new StringExotic(realm);\n\n  // 3. Set the [[StringData]] internal slot of S to value.\n  S.$StringData = value;\n\n  // 4. Set S's essential internal methods to the default ordinary object definitions specified in 9.1.\n\n  // 5. Set the [[GetOwnProperty]] internal method of S as specified in 9.4.3.1.\n\n  // 6. Set the [[OwnPropertyKeys]] internal method of S as specified in 9.4.3.2.\n\n  // 7. Set the [[Prototype]] internal slot of S to prototype.\n  S.$Prototype = prototype;\n\n  // 8. Set the [[Extensible]] internal slot of S to true.\n  S.setExtensible(true);\n\n  // 9. Let length be the number of code unit elements in value.\n  let length = value.value.length;\n\n  // 10. Perform ! DefinePropertyOrThrow(S, \"length\", PropertyDescriptor{[[Value]]: length, [[Writable]]: false, [[Enumerable]]: false, [[Configurable]]: false }).\n  Properties.DefinePropertyOrThrow(realm, S, \"length\", {\n    value: new NumberValue(realm, length),\n    writable: false,\n    enumerable: false,\n    configurable: false,\n  });\n\n  // 11. Return S.\n  return S;\n}\n\n// B.2.3.2.1\nexport function CreateHTML(\n  realm: Realm,\n  string: Value,\n  tag: string,\n  attribute: string,\n  value: string | Value\n): StringValue {\n  // 1. Let str be ? RequireObjectCoercible(string).\n  let str = RequireObjectCoercible(realm, string);\n\n  // 2. Let S be ? ToString(str).\n  let S = ToStringPartial(realm, str);\n\n  // 3. Let p1 be the String value that is the concatenation of \"<\" and tag.\n  let p1 = `<${tag}`;\n\n  // 4. If attribute is not the empty String, then\n  if (attribute) {\n    // a. Let V be ? ToString(value).\n    let V = ToStringPartial(realm, value);\n\n    // b. Let escapedV be the String value that is the same as V except that each occurrence of the code unit\n    //    0x0022 (QUOTATION MARK) in V has been replaced with the six code unit sequence \"&quot;\".\n    let escapedV = V.replace(/\"/g, \"&quot;\");\n\n    // c. Let p1 be the String value that is the concatenation of the following String values:\n    // - The String value of p1\n    // - Code unit 0x0020 (SPACE)\n    // - The String value of attribute\n    // - Code unit 0x003D (EQUALS SIGN)\n    // - Code unit 0x0022 (QUOTATION MARK)\n    // - The String value of escapedV\n    // - Code unit 0x0022 (QUOTATION MARK)\n    p1 = `${p1} ${attribute}=\"${escapedV}\"`;\n  }\n\n  // 5. Let p2 be the String value that is the concatenation of p1 and \">\".\n  let p2 = `${p1}>`;\n\n  // 6. Let p3 be the String value that is the concatenation of p2 and S.\n  let p3 = `${p2}${S}`;\n\n  // 7. Let p4 be the String value that is the concatenation of p3, \"</\", tag, and \">\".\n  let p4 = `${p3}</${tag}>`;\n\n  // 8. Return p4.\n  return new StringValue(realm, p4);\n}\n\n// ECMA262 9.4.4.8.1\nexport function MakeArgGetter(realm: Realm, name: string, env: EnvironmentRecord): NativeFunctionValue {\n  return new NativeFunctionValue(\n    realm,\n    undefined,\n    undefined,\n    0,\n    context => {\n      return env.GetBindingValue(name, false);\n    },\n    false\n  );\n}\n\n// ECMA262 9.4.4.8.1\nexport function MakeArgSetter(realm: Realm, name: string, env: EnvironmentRecord): NativeFunctionValue {\n  return new NativeFunctionValue(\n    realm,\n    undefined,\n    undefined,\n    1,\n    (context, [value]) => {\n      return env.SetMutableBinding(name, value, false);\n    },\n    false\n  );\n}\n\n// ECMA262 21.1.5.1\nexport function CreateStringIterator(realm: Realm, string: StringValue): ObjectValue {\n  // 1. Assert: Type(string) is String.\n  invariant(string instanceof StringValue, \"expected string to be a string value\");\n\n  // 2. Let iterator be ObjectCreate(%StringIteratorPrototype%, « [[IteratedString]], [[StringIteratorNextIndex]] »).\n  let iterator = ObjectCreate(realm, realm.intrinsics.StringIteratorPrototype, {\n    $IteratedString: undefined,\n    $StringIteratorNextIndex: undefined,\n  });\n\n  // 3. Set iterator's [[IteratedString]] internal slot to string.\n  iterator.$IteratedString = string;\n\n  // 4. Set iterator's [[StringIteratorNextIndex]] internal slot to 0.\n  iterator.$StringIteratorNextIndex = 0;\n\n  // 5. Return iterator.\n  return iterator;\n}\n\n// ECMA262 9.4.2.3\nexport function ArraySpeciesCreate(realm: Realm, originalArray: ObjectValue, length: number): ObjectValue {\n  // 1. Assert: length is an integer Number ≥ 0.\n  invariant(length >= 0, \"expected length >= 0\");\n\n  // 2. If length is -0, let length be +0.\n  if (Object.is(length, -0)) length = +0;\n\n  // 3. Let C be undefined.\n  let C = realm.intrinsics.undefined;\n\n  // 4. Let isArray be ? IsArray(originalArray).\n  let isArray = IsArray(realm, originalArray);\n\n  // 5. If isArray is true, then\n  if (isArray) {\n    // a. Let C be ? Get(originalArray, \"constructor\").\n    C = Get(realm, originalArray, \"constructor\");\n\n    // b. If IsConstructor(C) is true, then\n    if (IsConstructor(realm, C)) {\n      invariant(C instanceof ObjectValue);\n      // i. Let thisRealm be the current Realm Record.\n      let thisRealm = realm;\n\n      // ii. Let realmC be ? GetFunctionRealm(C).\n      let realmC = GetFunctionRealm(realm, C);\n\n      // iii. If thisRealm and realmC are not the same Realm Record, then\n      if (thisRealm !== realmC) {\n        // 1. If SameValue(C, realmC.[[Intrinsics]].[[%Array%]]) is true, let C be undefined.\n        if (SameValue(realm, C, realmC.intrinsics.Array)) {\n          C = realm.intrinsics.undefined;\n        }\n      }\n    }\n\n    // c. If Type(C) is Object, then\n    if (C.mightBeObject()) {\n      if (C.mightNotBeObject()) C.throwIfNotConcrete();\n      invariant(C instanceof ObjectValue || C instanceof AbstractObjectValue);\n      // i. Let C be ? Get(C, @@species).\n      C = Get(realm, C, realm.intrinsics.SymbolSpecies);\n\n      // ii. If C is null, let C be undefined.\n      if (C instanceof NullValue) C = realm.intrinsics.undefined;\n    }\n  }\n\n  // 6. If C is undefined, return ? ArrayCreate(length).\n  if (C instanceof UndefinedValue) return ArrayCreate(realm, length);\n\n  // 7. If IsConstructor(C) is false, throw a TypeError exception.\n  if (!IsConstructor(realm, C)) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"not a constructor\");\n  }\n\n  // 8. Return ? Construct(C, « length »).\n  return Construct(realm, C.throwIfNotConcreteObject(), [new NumberValue(realm, length)]);\n}\n\n// ECMA262 7.4.7\nexport function CreateIterResultObject(realm: Realm, value: Value, done: boolean): ObjectValue {\n  // 1. Assert: Type(done) is Boolean.\n  invariant(typeof done === \"boolean\", \"expected done to be a boolean\");\n\n  // 2. Let obj be ObjectCreate(%ObjectPrototype%).\n  let obj = ObjectCreate(realm, realm.intrinsics.ObjectPrototype);\n\n  // 3. Perform CreateDataProperty(obj, \"value\", value).\n  CreateDataProperty(realm, obj, \"value\", value);\n\n  // 4. Perform CreateDataProperty(obj, \"done\", done).\n  CreateDataProperty(realm, obj, \"done\", new BooleanValue(realm, done));\n\n  // 5. Return obj.\n  return obj;\n}\n\n// ECMA262 22.1.5.1\nexport function CreateArrayIterator(realm: Realm, array: ObjectValue, kind: IterationKind): ObjectValue {\n  // 1. Assert: Type(array) is Object.\n  invariant(array instanceof ObjectValue, \"expected object\");\n\n  // 2. Let iterator be ObjectCreate(%ArrayIteratorPrototype%, « [[IteratedObject]],\n  //    [[ArrayIteratorNextIndex]], [[ArrayIterationKind]] »).\n  let iterator = ObjectCreate(realm, realm.intrinsics.ArrayIteratorPrototype, {\n    $IteratedObject: undefined,\n    $ArrayIteratorNextIndex: undefined,\n    $ArrayIterationKind: undefined,\n  });\n\n  // 3. Set iterator's [[IteratedObject]] internal slot to array.\n  iterator.$IteratedObject = array;\n\n  // 4. Set iterator's [[ArrayIteratorNextIndex]] internal slot to 0.\n  iterator.$ArrayIteratorNextIndex = new NumberValue(realm, 0);\n\n  // 5. Set iterator's [[ArrayIterationKind]] internal slot to kind.\n  iterator.$ArrayIterationKind = kind;\n\n  // 6. Return iterator.\n  return iterator;\n}\n\n// ECMA262 9.4.2.2\nexport function ArrayCreate(realm: Realm, length: number, proto?: ObjectValue): ArrayValue {\n  // 1. Assert: length is an integer Number ≥ 0.\n  invariant(length >= 0);\n\n  // 2. If length is -0, let length be +0.\n  if (Object.is(length, -0)) length = +0;\n\n  // 3. If length>232-1, throw a RangeError exception.\n  if (length > Math.pow(2, 32) - 1) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.RangeError, \"length>2^32-1\");\n  }\n\n  // 4. If the proto argument was not passed, let proto be the intrinsic object %ArrayPrototype%.\n  proto = proto || realm.intrinsics.ArrayPrototype;\n\n  // 5. Let A be a newly created Array exotic object.\n  let A = new ArrayValue(realm);\n\n  // 6. Set A's essential internal methods except for [[DefineOwnProperty]] to the default ordinary object definitions specified in 9.1.\n  // 7. Set the [[DefineOwnProperty]] internal method of A as specified in 9.4.2.1.\n\n  // 8. Set the [[Prototype]] internal slot of A to proto.\n  A.$Prototype = proto;\n\n  // 9. Set the [[Extensible]] internal slot of A to true.\n  A.setExtensible(true);\n\n  // 10. Perform ! OrdinaryDefineOwnProperty(A, \"length\", PropertyDescriptor{[[Value]]: length, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: false}).\n  Properties.OrdinaryDefineOwnProperty(realm, A, \"length\", {\n    value: new NumberValue(realm, length),\n    writable: true,\n    enumerable: false,\n    configurable: false,\n  });\n\n  // 11. Return A.\n  return A;\n}\n\n// ECMA262 7.3.16\nexport function CreateArrayFromList(realm: Realm, elems: Array<Value>): ArrayValue {\n  // 1. Assert: elements is a List whose elements are all ECMAScript language values.\n  for (let elem of elems) invariant(elem instanceof Value, \"value expected\");\n\n  // 2. Let array be ArrayCreate(0) (see 9.4.2.2).\n  let arr = ArrayCreate(realm, 0);\n\n  // 3. Let n be 0.\n  let n = 0;\n\n  // 4. For each element e of elements\n  for (let elem of elems) {\n    // a. Let status be CreateDataProperty(array, ! ToString(n), e).\n    let status = CreateDataProperty(realm, arr, new StringValue(realm, n + \"\"), elem);\n\n    // b. Assert: status is true.\n    invariant(status, \"couldn't create data property\");\n\n    // c. Increment n by 1.\n    n++;\n  }\n\n  // 5. Return array.\n  return arr;\n}\n\n// ECMA262 9.4.4.7\nexport function CreateUnmappedArgumentsObject(realm: Realm, argumentsList: Array<Value>): ObjectValue {\n  // 1. Let len be the number of elements in argumentsList.\n  let len = argumentsList.length;\n\n  // 2. Let obj be ObjectCreate(%ObjectPrototype%, « [[ParameterMap]] »).\n  let obj = ObjectCreate(realm, realm.intrinsics.ObjectPrototype);\n\n  // 3. Set obj's [[ParameterMap]] internal slot to undefined.\n  obj.$ParameterMap = obj; // The value is never used, but allows us to use undefined for \"not in\"\n\n  // 4. Perform DefinePropertyOrThrow(obj, \"length\", PropertyDescriptor{[[Value]]: len,\n  //    [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}).\n  Properties.DefinePropertyOrThrow(realm, obj, \"length\", {\n    value: new NumberValue(realm, len),\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  });\n\n  // 5. Let index be 0.\n  let index = 0;\n\n  // 6. Repeat while index < len,\n  while (index < len) {\n    // a. Let val be argumentsList[index].\n    let val = argumentsList[index];\n\n    // b. Perform CreateDataProperty(obj, ! ToString(index), val).\n    CreateDataProperty(realm, obj, new StringValue(realm, index + \"\"), val);\n\n    // c. Let index be index + 1.\n    index++;\n  }\n\n  // 7. Perform ! DefinePropertyOrThrow(obj, @@iterator, PropertyDescriptor {[[Value]]:\n  //    %ArrayProto_values%, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}).\n  Properties.DefinePropertyOrThrow(realm, obj, realm.intrinsics.SymbolIterator, {\n    value: realm.intrinsics.ArrayProto_values,\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  });\n\n  // 8. Perform ! DefinePropertyOrThrow(obj, \"callee\", PropertyDescriptor {[[Get]]:\n  // %ThrowTypeError%, [[Set]]: %ThrowTypeError%, [[Enumerable]]: false, [[Configurable]]: false}).\n  Properties.DefinePropertyOrThrow(realm, obj, \"callee\", {\n    get: realm.intrinsics.ThrowTypeError,\n    set: realm.intrinsics.ThrowTypeError,\n    enumerable: false,\n    configurable: false,\n  });\n\n  // 10. Return obj.\n  return obj;\n}\n\n// ECMA262 9.4.4.8\nexport function CreateMappedArgumentsObject(\n  realm: Realm,\n  func: FunctionValue,\n  formals: Array<BabelNodeLVal>,\n  argumentsList: Array<Value>,\n  env: EnvironmentRecord\n): ObjectValue {\n  // 1. Assert: formals does not contain a rest parameter, any binding patterns, or any\n  //    initializers. It may contain duplicate identifiers.\n  for (let param of formals) {\n    invariant(param.type === \"Identifier\", \"expected only simple params\");\n  }\n\n  // 2. Let len be the number of elements in argumentsList.\n  let len = argumentsList.length;\n\n  // 3. Let obj be a newly created arguments exotic object with a [[ParameterMap]] internal slot.\n  let obj = new ArgumentsExotic(realm);\n\n  // 4. Set the [[GetOwnProperty]] internal method of obj as specified in 9.4.4.1.\n\n  // 5. Set the [[DefineOwnProperty]] internal method of obj as specified in 9.4.4.2.\n\n  // 6. Set the [[Get]] internal method of obj as specified in 9.4.4.3.\n\n  // 7. Set the [[Set]] internal method of obj as specified in 9.4.4.4.\n\n  // 8. Set the [[Delete]] internal method of obj as specified in 9.4.4.6.\n\n  // 9. Set the remainder of obj's essential internal methods to the default ordinary\n  //    object definitions specified in 9.1.\n\n  // 10. Set the [[Prototype]] internal slot of obj to %ObjectPrototype%.\n  obj.$Prototype = realm.intrinsics.ObjectPrototype;\n\n  // 11. Set the [[Extensible]] internal slot of obj to true.\n  obj.setExtensible(true);\n\n  // 12. Let map be ObjectCreate(null).\n  let map = new ObjectValue(realm);\n\n  // 13. Set the [[ParameterMap]] internal slot of obj to map.\n  obj.$ParameterMap = map;\n\n  // 14. Let parameterNames be the BoundNames of formals.\n  let parameterNames = [];\n  for (let param of formals) {\n    parameterNames.push(((param: any): BabelNodeIdentifier).name);\n  }\n\n  // 15. Let numberOfParameters be the number of elements in parameterNames.\n  let numberOfParameters = parameterNames.length;\n\n  // 16. Let index be 0.\n  let index = 0;\n\n  // 17. Repeat while index < len,\n  while (index < len) {\n    // a. Let val be argumentsList[index].\n    let val = argumentsList[index];\n\n    // b. Perform CreateDataProperty(obj, ! ToString(index), val).\n    CreateDataProperty(realm, obj, new StringValue(realm, index + \"\"), val);\n\n    // c. Let index be index + 1.\n    index++;\n  }\n\n  // 18. Perform DefinePropertyOrThrow(obj, \"length\", PropertyDescriptor{[[Value]]: len,\n  //     [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}).\n  Properties.DefinePropertyOrThrow(realm, obj, \"length\", {\n    value: new NumberValue(realm, len),\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  });\n\n  // 19. Let mappedNames be an empty List.\n  let mappedNames = [];\n\n  // 20. Let index be numberOfParameters - 1.\n  index = numberOfParameters - 1;\n\n  // 21. Repeat while index ≥ 0,\n  while (index >= 0) {\n    // a. Let name be parameterNames[index].\n    let name = parameterNames[index];\n\n    // b. If name is not an element of mappedNames, then\n    if (mappedNames.indexOf(name) < 0) {\n      // i. Add name as an element of the list mappedNames.\n      mappedNames.push(name);\n\n      // ii. If index < len, then\n      if (index < len) {\n        // 1. Let g be MakeArgGetter(name, env).\n        let g = MakeArgGetter(realm, name, env);\n\n        // 2. Let p be MakeArgSetter(name, env).\n        let p = MakeArgSetter(realm, name, env);\n\n        // 3. Perform map.[[DefineOwnProperty]](! ToString(index), PropertyDescriptor{[[Set]]: p, [[Get]]: g,\n        //    [[Enumerable]]: false, [[Configurable]]: true}).\n        map.$DefineOwnProperty(new StringValue(realm, index + \"\"), {\n          set: p,\n          get: g,\n          enumerable: false,\n          configurable: true,\n        });\n      }\n    }\n\n    // c. Let index be index - 1.\n    index--;\n  }\n\n  // 22. Perform ! DefinePropertyOrThrow(obj, @@iterator, PropertyDescriptor {[[Value]]:\n  //     %ArrayProto_values%, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}).\n  Properties.DefinePropertyOrThrow(realm, obj, realm.intrinsics.SymbolIterator, {\n    value: realm.intrinsics.ArrayProto_values,\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  });\n\n  // 23. Perform ! DefinePropertyOrThrow(obj, \"callee\", PropertyDescriptor {[[Value]]:\n  //     func, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}).\n  Properties.DefinePropertyOrThrow(realm, obj, \"callee\", {\n    value: func,\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  });\n\n  // 24. Return obj.\n  return obj;\n}\n\n// ECMA262 7.3.4\nexport function CreateDataProperty(realm: Realm, O: ObjectValue, P: PropertyKeyValue, V: Value): boolean {\n  // 1. Assert: Type(O) is Object.\n  invariant(O instanceof ObjectValue, \"Not an object value\");\n\n  // 2. Assert: IsPropertyKey(P) is true.\n  invariant(IsPropertyKey(realm, P), \"Not a property key\");\n\n  // 3. Let newDesc be the PropertyDescriptor{[[Value]]: V, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}.\n  let newDesc = {\n    value: V,\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  };\n\n  // 4. Return ? O.[[DefineOwnProperty]](P, newDesc).\n  return O.$DefineOwnProperty(P, newDesc);\n}\n\n// ECMA262 7.3.5\nexport function CreateMethodProperty(realm: Realm, O: ObjectValue, P: PropertyKeyValue, V: Value): boolean {\n  // 1. Assert: Type(O) is Object.\n  invariant(O instanceof ObjectValue, \"Not an object value\");\n\n  // 2. Assert: IsPropertyKey(P) is true.\n  invariant(IsPropertyKey(realm, P), \"Not a property key\");\n\n  // 3. Let newDesc be the PropertyDescriptor{[[Value]]: V, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}.\n  let newDesc = {\n    value: V,\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  };\n\n  // 4. Return ? O.[[DefineOwnProperty]](P, newDesc).\n  return O.$DefineOwnProperty(P, newDesc);\n}\n\n// ECMA262 7.3.6\nexport function CreateDataPropertyOrThrow(realm: Realm, O: Value, P: PropertyKeyValue, V: Value): boolean {\n  // 1. Assert: Type(O) is Object.\n  invariant(O instanceof ObjectValue, \"Not an object value\");\n\n  // 2. Assert: IsPropertyKey(P) is true.\n  invariant(IsPropertyKey(realm, P), \"Not a property key\");\n\n  //3. Let success be ? CreateDataProperty(O, P, V).\n  let success = CreateDataProperty(realm, O, P, V);\n\n  // 4. If success is false, throw a TypeError exception.\n  if (success === false) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"not a function\");\n  }\n\n  // 5. Return success.\n  return success;\n}\n\n// ECMA262 9.1.12\nexport function ObjectCreate(\n  realm: Realm,\n  proto: ObjectValue | NullValue,\n  internalSlotsList?: { [key: string]: void }\n): ObjectValue {\n  // 1. If internalSlotsList was not provided, let internalSlotsList be an empty List.\n  internalSlotsList = internalSlotsList || {};\n\n  // 2. Let obj be a newly created object with an internal slot for each name in internalSlotsList.\n  let obj = new ObjectValue(realm);\n  Object.assign(obj, internalSlotsList);\n\n  // 3. Set obj's essential internal methods to the default ordinary object definitions specified in 9.1.\n\n  // 4. Set the [[Prototype]] internal slot of obj to proto.\n  obj.$Prototype = proto;\n\n  // 5. Set the [[Extensible]] internal slot of obj to true.\n  obj.setExtensible(true);\n\n  // 6. Return obj.\n  return obj;\n}\n\n// ECMA262 9.1.13\nexport function OrdinaryCreateFromConstructor(\n  realm: Realm,\n  constructor: ObjectValue,\n  intrinsicDefaultProto: string,\n  internalSlotsList?: { [key: string]: void }\n): ObjectValue {\n  // 1. Assert: intrinsicDefaultProto is a String value that is this specification's name of an intrinsic\n  //    object. The corresponding object must be an intrinsic that is intended to be used as the [[Prototype]]\n  //    value of an object.\n  invariant(realm.intrinsics[intrinsicDefaultProto], \"not a valid proto ref\");\n\n  // 2. Let proto be ? GetPrototypeFromConstructor(constructor, intrinsicDefaultProto).\n  let proto = GetPrototypeFromConstructor(realm, constructor, intrinsicDefaultProto);\n\n  // 3. Return ObjectCreate(proto, internalSlotsList).\n  return ObjectCreate(realm, proto, internalSlotsList);\n}\n\n// ECMA262 7.3.17\nexport function CreateListFromArrayLike(realm: Realm, obj: Value, elementTypes?: Array<string>) {\n  // 1. If elementTypes was not passed, let elementTypes be « Undefined, Null, Boolean, String, Symbol, Number, Object ».\n  elementTypes = elementTypes || [\"Undefined\", \"Null\", \"Boolean\", \"String\", \"Symbol\", \"Number\", \"Object\"];\n\n  // 2. If Type(obj) is not Object, throw a TypeError exception.\n  if (!(obj instanceof ObjectValue)) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"Not an object\");\n  }\n\n  // 3. Let len be ? ToLength(? Get(obj, \"length\")).\n  let len = ToLength(realm, Get(realm, obj, \"length\"));\n\n  // 4. Let list be a new empty List.\n  let list: Array<Value> = [];\n\n  // 5. Let index be 0.\n  let index = 0;\n\n  // 6. Repeat while index < len\n  while (index < len) {\n    // a. Let indexName be ! ToString(index).\n    let indexName = index + \"\";\n\n    // b. Let next be ? Get(obj, indexName).\n    let next = Get(realm, obj, indexName);\n\n    // c. If Type(next) is not an element of elementTypes, throw a TypeError exception.\n    if (elementTypes.indexOf(Type(realm, next)) < 0) {\n      throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"invalid element type\");\n    }\n\n    // d. Append next as the last element of list.\n    list.push(next);\n\n    // e. Set index to index + 1.\n    index++;\n  }\n\n  // 7. Return list.\n  return list;\n}\n\n// ECMA262 19.2.1.1.1\nexport function CreateDynamicFunction(\n  realm: Realm,\n  constructor: ObjectValue,\n  newTarget: void | ObjectValue,\n  kind: \"normal\" | \"generator\",\n  args: Array<Value>\n): Value {\n  // 1. If newTarget is undefined, let newTarget be constructor.\n  newTarget = !newTarget ? constructor : newTarget;\n\n  let fallbackProto;\n  // 2. If kind is \"normal\", then\n  if (kind === \"normal\") {\n    // a. Let goal be the grammar symbol FunctionBody.\n\n    // b. Let parameterGoal be the grammar symbol FormalParameters.\n\n    // c. Let fallbackProto be \"%FunctionPrototype%\".\n    fallbackProto = \"FunctionPrototype\";\n  } else {\n    // 3. Else,\n    // a. Let goal be the grammar symbol GeneratorBody.\n\n    // b. Let parameterGoal be the grammar symbol FormalParameters[Yield].\n\n    // c. Let fallbackProto be \"%Generator%\".\n    fallbackProto = \"Generator\";\n  }\n\n  // 4. Let argCount be the number of elements in args.\n  let argCount = args.length;\n\n  // 5. Let P be the empty String.\n  let P = \"\";\n\n  let bodyText;\n  // 6. If argCount = 0, let bodyText be the empty String.\n  if (argCount === 0) {\n    bodyText = realm.intrinsics.emptyString;\n  } else if (argCount === 1) {\n    // 7. Else if argCount = 1, let bodyText be args[0].\n    bodyText = args[0];\n  } else {\n    // 8. Else argCount > 1,\n    // a. Let firstArg be args[0].\n    let firstArg = args[0];\n\n    // b. Let P be ? ToString(firstArg).\n    P = ToStringPartial(realm, firstArg);\n\n    // c. Let k be 1.\n    let k = 1;\n\n    // d. Repeat, while k < argCount-1\n    while (k < argCount - 1) {\n      // i. Let nextArg be args[k].\n      let nextArg = args[k];\n\n      // ii. Let nextArgString be ? ToString(nextArg).\n      let nextArgString = ToStringPartial(realm, nextArg);\n\n      // iii. Let P be the result of concatenating the previous value of P, the String \",\" (a comma), and nextArgString.\n      P = P + \",\" + nextArgString;\n\n      // iv. Increase k by 1.\n      k += 1;\n    }\n\n    // e. Let bodyText be args[k].\n    bodyText = args[k];\n  }\n\n  // 9. Let bodyText be ? ToString(bodyText).\n  bodyText = ToStringPartial(realm, bodyText);\n\n  // 10. Let parameters be the result of parsing P, interpreted as UTF-16 encoded Unicode text as described in 6.1.4, using parameterGoal as the goal symbol. Throw a SyntaxError exception if the parse fails.\n  // 11. Let body be the result of parsing bodyText, interpreted as UTF-16 encoded Unicode text as described in 6.1.4, using goal as the goal symbol. Throw a SyntaxError exception if the parse fails.\n  let ast;\n  try {\n    ast = parse(realm, \"function\" + (kind === \"generator\" ? \"*\" : \"\") + \" _(\" + P + \"){\" + bodyText + \"}\", \"eval\");\n  } catch (e) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.SyntaxError, \"parse failed\");\n  }\n  let { program: { body: [functionDeclaration] } } = ast;\n  if (!functionDeclaration) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.SyntaxError, \"parse failed\");\n  }\n  invariant(functionDeclaration.type === \"FunctionDeclaration\");\n  let { params, body } = ((functionDeclaration: any): BabelNodeFunctionDeclaration);\n\n  // 12. If bodyText is strict mode code, then let strict be true, else let strict be false.\n  let strict = IsStrict(body);\n\n  // 13. If any static semantics errors are detected for parameters or body, throw a SyntaxError or a ReferenceError exception, depending on the type of the error. If strict is true, the Early Error rules for StrictFormalParameters:FormalParameters are applied. Parsing and early error detection may be interweaved in an implementation dependent manner.\n\n  // 14. If ContainsUseStrict of body is true and IsSimpleParameterList of parameters is false, throw a SyntaxError exception.\n\n  // 15. If any element of the BoundNames of parameters also occurs in the LexicallyDeclaredNames of body, throw a SyntaxError exception.\n\n  // 16. If body Contains SuperCall is true, throw a SyntaxError exception.\n\n  // 17. If parameters Contains SuperCall is true, throw a SyntaxError exception.\n\n  // 18. If body Contains SuperProperty is true, throw a SyntaxError exception.\n\n  // 19. If parameters Contains SuperProperty is true, throw a SyntaxError exception.\n\n  // 20. If kind is \"generator\", then\n  if (kind === \"generator\") {\n    // a. If parameters Contains YieldExpression is true, throw a SyntaxError exception.\n    let containsYield = false;\n    for (let param of params) {\n      traverseFast(param, node => {\n        if (node.type === \"YieldExpression\") {\n          containsYield = true;\n          return true;\n        }\n        if (node.type === \"Identifier\" && node.name === \"yield\") {\n          containsYield = true;\n          return true;\n        }\n        return false;\n      });\n    }\n    if (containsYield) {\n      throw realm.createErrorThrowCompletion(realm.intrinsics.SyntaxError, \"parse failed\");\n    }\n  }\n\n  // 21. If strict is true, then\n  if (strict === true) {\n    // a. If BoundNames of parameters contains any duplicate elements, throw a SyntaxError exception.\n  }\n\n  // 22. Let proto be ? GetPrototypeFromConstructor(newTarget, fallbackProto).\n  let proto = GetPrototypeFromConstructor(realm, newTarget, fallbackProto);\n\n  // 23. Let F be FunctionAllocate(proto, strict, kind).\n  let F = Functions.FunctionAllocate(realm, proto, strict, kind);\n\n  // 24. Let realmF be the value of F's [[Realm]] internal slot.\n  let realmF = F.$Realm;\n\n  // 25. Let scope be realmF.[[GlobalEnv]].\n  let scope = realmF.$GlobalEnv;\n\n  // 26. Perform FunctionInitialize(F, Normal, parameters, body, scope).\n  Functions.FunctionInitialize(realm, F, \"normal\", params, body, scope);\n\n  // 27. If kind is \"generator\", then\n  if (kind === \"generator\") {\n    // a. Let prototype be ObjectCreate(%GeneratorPrototype%).\n    let prototype = ObjectCreate(realm, realm.intrinsics.GeneratorPrototype);\n    prototype.originalConstructor = F;\n\n    // b. Perform DefinePropertyOrThrow(F, \"prototype\", PropertyDescriptor{[[Value]]: prototype, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: false}).\n    Properties.DefinePropertyOrThrow(realm, F, \"prototype\", {\n      value: prototype,\n      writable: true,\n      enumerable: false,\n      configurable: false,\n    });\n  } else {\n    // 28. Else, perform MakeConstructor(F).\n    MakeConstructor(realm, F);\n  }\n\n  // 29. Perform SetFunctionName(F, \"anonymous\").\n  Functions.SetFunctionName(realm, F, \"anonymous\");\n\n  // 30. Return F.\n  return F;\n}\n"]}